
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>DRY Computation - maque.onlyverse</title>
  <meta name="author" content="maque">

  
  <meta name="description" content="There is this one nice &amp; simple principle: don’t repeat yourself. Basically you shouldn’t repeat your code if you can create more generic method &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://maque.github.io/blog/2014/03/12/dry-computation">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="maque.onlyverse" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="stylesheets/sons-of-obsidian.css" type="text/css" rel="stylesheet" />
<script src="javascripts/prettify/prettify.js" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function() {
    $("article pre:has(> code):not(.nohl)").addClass("prettyprint");
    prettyPrint();
  });
</script>
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">maque.onlyverse</a></h1>
  
    <h2>Developer paths</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:maque.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">DRY Computation</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-12T17:09:13+00:00" pubdate data-updated="true">Mar 12<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>There is this one nice &amp; simple principle: don’t repeat yourself. Basically you shouldn’t repeat your code if you can create more generic method, after all it’s good for code maintainability.</p>

<p>But being to DRY on your side can easily cause strange behavior. Recently I’ve noticed really weird behavior of SQL Management Studio. If you will open lots of tabs and close them, you will see what i mean – whole SQL MS window is jumping like a tiger from Winnie the pooh.</p>

<p>Let’s imagine for a moment how this could happen because of following DRY principle .</p>

<p>We’re starting with something simple. We create a function for closing one tab:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">private</span> <span class="k">void</span> <span class="nf">DisposeTab</span><span class="p">(</span><span class="n">Tab</span> <span class="n">tab</span><span class="p">){</span>
</span><span class='line'>  <span class="c1">//release allocated memory</span>
</span><span class='line'>  <span class="c1">//a lot of different stuff that is needed in this place</span>
</span><span class='line'>  <span class="n">AllTabs</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="n">tab</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">void</span> <span class="nf">CloseTab</span><span class="p">(</span><span class="n">Tab</span> <span class="n">tab</span><span class="p">){</span>
</span><span class='line'>   <span class="n">DisposeTab</span><span class="p">(</span><span class="n">tab</span><span class="p">);</span>
</span><span class='line'>   <span class="n">RedrawWindow</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>It’s nice, it’s simple and int works. Now we need second function for closing all tabs at once. And we now that already we have function for closing one Tab. We wanted to stay DRY and created something like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">private</span> <span class="k">void</span> <span class="nf">ClosseAllTabs</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">foreach</span><span class="p">(</span><span class="n">Tab</span> <span class="n">tab</span> <span class="k">in</span> <span class="n">AllTabs</span><span class="p">){</span>
</span><span class='line'>    <span class="n">CloseTab</span><span class="p">(</span><span class="n">tab</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And I’m like 100% sure that it is what is happening in SQL MS. Window is jumping because it’s refresh itself for each closed tab instead of waiting for closing them all and then re-draw window. Code look like DRY but actually it is unnecessary repeated in loop. We should not only avoid code repeating but also avoid repeating computation.</p>

<p>Maybe you remember about that when you are dealing with getting all rows from database, maybe you remember about that with advanced computation – compute them once and put into table. But as MS SQL example shows it is easy to forgot when dealing with simpler things.</p>

<p>I found it’s very useful to start opposite way – writing function for dealing with list or array of items instead of one item. For this example it would be something like that:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">private</span> <span class="k">void</span> <span class="nf">DisposeTab</span><span class="p">(</span><span class="n">Tab</span> <span class="n">tab</span><span class="p">){</span>
</span><span class='line'>  <span class="c1">//release allocated memory</span>
</span><span class='line'>  <span class="c1">//a lot of different stuff that is needed in this place</span>
</span><span class='line'>  <span class="n">AllTabs</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="n">tab</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">private</span> <span class="k">void</span> <span class="nf">CloseTabs</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="n">Tab</span><span class="p">&gt;</span> <span class="n">tabs</span><span class="p">){</span>
</span><span class='line'>  <span class="k">foreach</span><span class="p">(</span><span class="n">Tab</span> <span class="n">tab</span> <span class="k">in</span> <span class="n">tabs</span><span class="p">){</span>
</span><span class='line'>    <span class="n">DisposeTab</span><span class="p">(</span><span class="n">tab</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="n">RedrawWindow</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">void</span> <span class="nf">CloseTab</span><span class="p">(</span><span class="n">Tab</span> <span class="n">tab</span><span class="p">){</span>
</span><span class='line'>  <span class="n">CloseTabs</span><span class="p">(</span><span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Tab</span><span class="p">&gt;{</span><span class="n">tab</span><span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">void</span> <span class="nf">ClosseAllTabs</span><span class="p">(){</span>
</span><span class='line'>  <span class="n">CloseTabs</span><span class="p">(</span><span class="n">AllTabs</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>After all you will always end up with writing method for dealing with all items (adding, removing, changing) and starting with this point can let you avoid a lot of problems in future. Also very quick it made you to rewrite your methods and optimize all code.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">maque</span></span>

      








  


<time datetime="2014-03-12T17:09:13+00:00" pubdate data-updated="true">Mar 12<span>th</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/principlesrevisited/'>PrinciplesRevisited</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://maque.github.io/blog/2014/03/12/dry-computation/" data-via="" data-counturl="http://maque.github.io/blog/2014/03/12/dry-computation/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/03/10/ymni-vs-yagni/" title="Previous Post: YMNI vs YAGNI">&laquo; YMNI vs YAGNI</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/04/18/head-first-oo-analisys-and-design-quick-summary/" title="Next Post: Head First OO Analysis &amp; Design - Quick Summary">Head First OO Analysis &amp; Design - Quick Summary &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/books/'>Books (1)</a></li>
<li class='category'><a href='/blog/categories/principlesrevisited/'>PrinciplesRevisited (2)</a></li>
<li class='category'><a href='/blog/categories/summary/'>Summary (1)</a></li>

  </ul>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/04/18/head-first-oo-analisys-and-design-quick-summary/">Head First OO Analysis &amp; Design - Quick Summary</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/12/dry-computation/">DRY Computation</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/10/ymni-vs-yagni/">YMNI vs YAGNI</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - maque -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
